# IntoDrama í”„ë¡œì íŠ¸ êµ¬ì¡° ì •ë¦¬ ì™„ë£Œ

## ğŸ“ ìµœì¢… í”„ë¡œì íŠ¸ êµ¬ì¡°

```
IntoDrama/
â”œâ”€â”€ backend/                    # ë°±ì—”ë“œ (FastAPI)
â”‚   â”œâ”€â”€ config.py              # ì„¤ì • ë° ìƒìˆ˜
â”‚   â”œâ”€â”€ database.py            # ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸
â”‚   â”œâ”€â”€ personas.py            # ìºë¦­í„° í˜ë¥´ì†Œë‚˜ (1,855ì¤„)
â”‚   â”œâ”€â”€ main.py                # ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â”œâ”€â”€ drama_chat.db          # SQLite DB
â”‚   â”‚
â”‚   â”œâ”€â”€ routers/               # API ë¼ìš°í„°
â”‚   â”‚   â”œâ”€â”€ auth.py           # ì¸ì¦ (311ì¤„)
â”‚   â”‚   â”œâ”€â”€ chat.py           # ì±„íŒ… (114ì¤„)
â”‚   â”‚   â”œâ”€â”€ diary.py          # ì¼ê¸° (129ì¤„)
â”‚   â”‚   â””â”€â”€ features.py       # ê¸°íƒ€ ê¸°ëŠ¥ (77ì¤„)
â”‚   â”‚
â”‚   â”œâ”€â”€ services/              # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ ai_init.py        # AI ì´ˆê¸°í™”
â”‚   â”‚   â”œâ”€â”€ ai_response_service.py  # AI ì‘ë‹µ ìƒì„±
â”‚   â”‚   â””â”€â”€ memory_service.py # ë©”ëª¨ë¦¬ ê´€ë¦¬
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                 # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ auth_utils.py     # ì¸ì¦ ìœ í‹¸
â”‚   â”‚   â”œâ”€â”€ text_utils.py     # í…ìŠ¤íŠ¸ ì²˜ë¦¬
â”‚   â”‚   â””â”€â”€ time_utils.py     # ì‹œê°„ ì²˜ë¦¬
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                # ë°ì´í„° ëª¨ë¸
â”‚   â”‚   â””â”€â”€ schemas.py        # Pydantic ìŠ¤í‚¤ë§ˆ
â”‚   â”‚
â”‚   â””â”€â”€ migrations/            # DB ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚       â”œâ”€â”€ add_exchange_diary_columns.py
â”‚       â”œâ”€â”€ add_preview_message.py
â”‚       â”œâ”€â”€ migrate_add_whisper_topic.py
â”‚       â”œâ”€â”€ migrate_exchange_diary_prod.py
â”‚       â””â”€â”€ migrate_production.py
â”‚
â””â”€â”€ frontend/                   # í”„ë¡ íŠ¸ì—”ë“œ (React)
    â”œâ”€â”€ public/                # ì •ì  íŒŒì¼
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ App.js            # ë©”ì¸ ì•±
    â”‚   â”œâ”€â”€ App.css
    â”‚   â”œâ”€â”€ index.js
    â”‚   â”‚
    â”‚   â”œâ”€â”€ components/        # React ì»´í¬ë„ŒíŠ¸
    â”‚   â”‚   â”œâ”€â”€ CharacterSelectScreen.js   (257ì¤„)
    â”‚   â”‚   â”œâ”€â”€ CommonComponents.js        (324ì¤„)
    â”‚   â”‚   â”œâ”€â”€ DebateModal.js             (302ì¤„)
    â”‚   â”‚   â”œâ”€â”€ ExchangeDiaryScreen.js     (1,874ì¤„)
    â”‚   â”‚   â”œâ”€â”€ ModalComponents.js         (2,883ì¤„)
    â”‚   â”‚   â”œâ”€â”€ MyPageScreen.js            (90ì¤„) âœ¨ ë¶„ë¦¬ë¨
    â”‚   â”‚   â”œâ”€â”€ ReportComponents.js        (560ì¤„)
    â”‚   â”‚   â”œâ”€â”€ ScreenComponents.js        (4,083ì¤„) âœ¨ ì •ë¦¬ë¨
    â”‚   â”‚   â”œâ”€â”€ WeeklyDetailScreen.js      (1,514ì¤„)
    â”‚   â”‚   â””â”€â”€ WeeklyRecapScreen.js       (508ì¤„)
    â”‚   â”‚
    â”‚   â”œâ”€â”€ constants/         # ìƒìˆ˜
    â”‚   â”‚   â”œâ”€â”€ characterData.js
    â”‚   â”‚   â”œâ”€â”€ chatTemplates.js
    â”‚   â”‚   â””â”€â”€ debateTopics.js
    â”‚   â”‚
    â”‚   â””â”€â”€ utils/             # ìœ í‹¸ë¦¬í‹°
    â”‚       â”œâ”€â”€ api.js         # API í˜¸ì¶œ
    â”‚       â”œâ”€â”€ koreanJosa.js  # í•œêµ­ì–´ ì¡°ì‚¬
    â”‚       â”œâ”€â”€ storage.js     # ë¡œì»¬ ìŠ¤í† ë¦¬ì§€
    â”‚       â””â”€â”€ text.js        # í…ìŠ¤íŠ¸ ì²˜ë¦¬
    â”‚
    â””â”€â”€ package.json
```

## âœ… ì™„ë£Œëœ ì‘ì—…

### ë°±ì—”ë“œ ë¦¬íŒ©í† ë§
1. âœ… **ë¼ìš°í„° ë¶„ë¦¬**: auth, chat, diary, featuresë¥¼ `routers/` í´ë”ë¡œ ì´ë™
2. âœ… **ì„œë¹„ìŠ¤ ë ˆì´ì–´ êµ¬ì¶•**: AI ê´€ë ¨ ë¡œì§ì„ `services/`ë¡œ ë¶„ë¦¬
3. âœ… **ìœ í‹¸ë¦¬í‹° ë¶„ë¦¬**: ì¸ì¦, í…ìŠ¤íŠ¸, ì‹œê°„ ê´€ë ¨ í•¨ìˆ˜ë¥¼ `utils/`ë¡œ ë¶„ë¦¬
4. âœ… **ì¤‘ë³µ íŒŒì¼ ì œê±°**: `main_old.py`, `main_new.py`, `ai_service.py` ì‚­ì œ
5. âœ… **ë§ˆì´ê·¸ë ˆì´ì…˜ ì •ë¦¬**: ëª¨ë“  ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ `migrations/`ë¡œ ì´ë™
6. âœ… **Import ê²½ë¡œ ìˆ˜ì •**: ëª¨ë“  íŒŒì¼ì˜ import ê²½ë¡œ ì—…ë°ì´íŠ¸

### í”„ë¡ íŠ¸ì—”ë“œ ë¦¬íŒ©í† ë§
1. âœ… **MyPageScreen ë¶„ë¦¬**: `ScreenComponents.js`ì—ì„œ ë…ë¦½ íŒŒì¼ë¡œ ë¶„ë¦¬
2. âœ… **Import ê²½ë¡œ ìˆ˜ì •**: `App.js`ì˜ import ê²½ë¡œ ì—…ë°ì´íŠ¸

## ğŸ“Š íŒŒì¼ í¬ê¸° ë¹„êµ

### ë°±ì—”ë“œ
| íŒŒì¼ | Before | After | ê°œì„  |
|------|--------|-------|------|
| main.py | 5,659ì¤„ | ê¹”ë”í•œ êµ¬ì¡° | âœ… ëª¨ë“ˆí™” |
| routers/ | - | 4ê°œ íŒŒì¼ (631ì¤„) | âœ… ìƒˆë¡œ ìƒì„± |
| services/ | - | 3ê°œ íŒŒì¼ | âœ… ìƒˆë¡œ ìƒì„± |
| utils/ | - | 3ê°œ íŒŒì¼ | âœ… ìƒˆë¡œ ìƒì„± |

### í”„ë¡ íŠ¸ì—”ë“œ
| íŒŒì¼ | Before | After | ê°œì„  |
|------|--------|-------|------|
| ScreenComponents.js | 4,173ì¤„ | 4,083ì¤„ | âœ… 90ì¤„ ê°ì†Œ |
| MyPageScreen.js | - | 90ì¤„ | âœ… ë¶„ë¦¬ ì™„ë£Œ |

## ğŸ¯ ê°œì„  íš¨ê³¼

### 1. ì½”ë“œ ê°€ë…ì„± í–¥ìƒ
- ê° ê¸°ëŠ¥ì´ ëª…í™•í•˜ê²Œ ë¶„ë¦¬ë¨
- íŒŒì¼ ì´ë¦„ë§Œìœ¼ë¡œ ê¸°ëŠ¥ íŒŒì•… ê°€ëŠ¥

### 2. ìœ ì§€ë³´ìˆ˜ ìš©ì´
- íŠ¹ì • ê¸°ëŠ¥ ìˆ˜ì • ì‹œ í•´ë‹¹ íŒŒì¼ë§Œ ìˆ˜ì •
- ë²„ê·¸ ì¶”ì ì´ ì‰¬ì›Œì§

### 3. ì¬ì‚¬ìš©ì„± ì¦ê°€
- ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë¥¼ ì—¬ëŸ¬ ê³³ì—ì„œ ì‚¬ìš© ê°€ëŠ¥
- ì„œë¹„ìŠ¤ ë ˆì´ì–´ë¥¼ ë‹¤ë¥¸ ë¼ìš°í„°ì—ì„œë„ í™œìš©

### 4. í˜‘ì—… íš¨ìœ¨ í–¥ìƒ
- ì—¬ëŸ¬ ê°œë°œìê°€ ë™ì‹œì— ë‹¤ë¥¸ ëª¨ë“ˆ ì‘ì—… ê°€ëŠ¥
- Git ì¶©ëŒ ìµœì†Œí™”

### 5. í…ŒìŠ¤íŠ¸ ìš©ì´
- ê° ëª¨ë“ˆì„ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±ì´ ì‰¬ì›Œì§

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### ë°±ì—”ë“œ ì‹¤í–‰
```bash
cd backend
python -m venv venv
venv\Scripts\activate  # Windows
pip install -r requirements.txt
uvicorn main:app --reload
```

### í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰
```bash
cd frontend
npm install
npm start
```

## ğŸ“ ì£¼ìš” ë³€ê²½ ì‚¬í•­

### ë°±ì—”ë“œ
1. **ë¼ìš°í„° êµ¬ì¡°**
   - `from routers.auth import router as auth_router`
   - `from routers.chat import router as chat_router`
   - `from routers.diary import router as diary_router`
   - `from routers.features import router as features_router`

2. **ì„œë¹„ìŠ¤ ë ˆì´ì–´**
   - `services/ai_init.py`: AI ëª¨ë¸ ì´ˆê¸°í™”
   - `services/ai_response_service.py`: AI ì‘ë‹µ ìƒì„±
   - `services/memory_service.py`: ë©”ëª¨ë¦¬ ê´€ë¦¬

3. **ìœ í‹¸ë¦¬í‹°**
   - `utils/auth_utils.py`: JWT, ë¹„ë°€ë²ˆí˜¸ í•´ì‹±
   - `utils/text_utils.py`: í…ìŠ¤íŠ¸ ì²˜ë¦¬, ë§íˆ¬ ë¶„ì„
   - `utils/time_utils.py`: ì‹œê°„ ë³€í™˜, ë‚ ì”¨ API

### í”„ë¡ íŠ¸ì—”ë“œ
1. **ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬**
   - `MyPageScreen.js`: í”„ë¡œí•„ ì„¤ì • í™”ë©´ (ë…ë¦½)
   - `ScreenComponents.js`: ë‚˜ë¨¸ì§€ í™”ë©´ë“¤

2. **Import ê²½ë¡œ**
   ```javascript
   import { MyPageScreen } from './components/MyPageScreen';
   import { HistoryScreen, StatsScreen, ReportScreen } from './components/ScreenComponents';
   ```

## ğŸ”„ í–¥í›„ ê°œì„  ì‚¬í•­

### ë°±ì—”ë“œ
1. **ìŠ¤ì¼€ì¤„ëŸ¬ ë¶„ë¦¬**: `services/scheduler_service.py` ìƒì„±
2. **ë¯¸ë“¤ì›¨ì–´ ì¶”ê°€**: ë¡œê¹…, ì—ëŸ¬ í•¸ë“¤ë§
3. **í…ŒìŠ¤íŠ¸ ì½”ë“œ**: `tests/` í´ë” ìƒì„±
4. **í™˜ê²½ ë³€ìˆ˜**: `.env` íŒŒì¼ í™œìš© ê°•í™”

### í”„ë¡ íŠ¸ì—”ë“œ
1. **ScreenComponents.js ì¶”ê°€ ë¶„ë¦¬**:
   - `HistoryScreen.js` (200ì¤„)
   - `StatsScreen.js` (1,025ì¤„)
   - `ReportScreen.js` (2,858ì¤„)

2. **ModalComponents.js ë¶„ë¦¬** (2,883ì¤„):
   - ê°œë³„ ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬

3. **ExchangeDiaryScreen.js ë¶„ë¦¬** (1,874ì¤„):
   - ì‘ì„±/ì¡°íšŒ ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬

4. **ìƒíƒœ ê´€ë¦¬**: Redux ë˜ëŠ” Context API ë„ì…
5. **ì»¤ìŠ¤í…€ í›…**: ê³µí†µ ë¡œì§ì„ í›…ìœ¼ë¡œ ë¶„ë¦¬

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

- [ë°±ì—”ë“œ ë¦¬íŒ©í† ë§ ìƒì„¸](backend/README_REFACTORING.md)
- [í”„ë¡ íŠ¸ì—”ë“œ ë¦¬íŒ©í† ë§ ìƒì„¸](frontend/README_REFACTORING.md)

## âœ¨ ê²°ë¡ 

í”„ë¡œì íŠ¸ êµ¬ì¡°ê°€ ê¹”ë”í•˜ê²Œ ì •ë¦¬ë˜ì–´ **ìœ ì§€ë³´ìˆ˜ì„±**, **í™•ì¥ì„±**, **í˜‘ì—… íš¨ìœ¨**ì´ í¬ê²Œ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤!

íŠ¹íˆ ë°±ì—”ë“œì˜ ê²½ìš° 5,659ì¤„ì˜ ê±°ëŒ€í•œ íŒŒì¼ì´ ì—­í• ë³„ë¡œ ëª…í™•í•˜ê²Œ ë¶„ë¦¬ë˜ì–´, 
ì´ì œ ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ë‚˜ ë²„ê·¸ ìˆ˜ì •ì´ í›¨ì”¬ ì‰¬ì›Œì¡ŒìŠµë‹ˆë‹¤.

